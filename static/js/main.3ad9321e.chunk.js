(this["webpackJsonpdajeki-tarot"]=this["webpackJsonpdajeki-tarot"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";(function(e){var t=n(4),c=n(8);Object(c.config)({path:Object(t.resolve)(e,"../../.env")}),Object(c.config)({path:Object(t.resolve)(e,"../../.env.".concat("production"))})}).call(this,"/")},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(11),r=n.n(s),o=(n(16),n(2)),i=(n(17),n(19),n(20),n(21),n(0));var d=function(e){var t=e.className,n=e.children,s=e.toggle,r=e.style,d=Object(c.useState)(!1),j=Object(o.a)(d,2),l=j[0],u=j[1],b=Object(c.useState)(!1),O=Object(o.a)(b,2),p=O[0],m=O[1];if(1!==a.a.Children.count(n))throw new Error("\ud83d\udca5 Glow effect can only have one child element.");var x=function(){u(!l)},h=function(){var e;return function(){m(!0),e&&clearTimeout(e),e=setTimeout((function(){m(!1)}),150)}}(),v=l?"increase-glow":"",f=n.props.className||"",g=a.a.cloneElement(n,s?{className:"".concat(v," ").concat(f," abs-blur")}:{className:"".concat(f," abs-blur")}),S=a.a.cloneElement(n,{className:n.props.className}),w=p?"clicked-glow":"";return Object(i.jsxs)("div",{onMouseDown:s?h:void 0,onMouseEnter:x,onMouseLeave:x,className:"glow-container ".concat(t||""," ").concat(w),style:r,children:[g,S]})},j=Object(c.createContext)({setUserInfo:void 0}),l=j.Provider,u=Object(c.createContext)({jwt:"",setJwt:void 0}),b=u.Provider,O=n(5),p=n.n(O),m=n(3),x=n.n(m),h=n(6);var v=Object(c.createContext)({needReload:!0,setNeedReload:void 0}),f=v.Provider,g="914582580489-tms667vjlg9nq2n7c2rkjfbadsk2bsrp.apps.googleusercontent.com";var S=function(){var e=Object(c.useContext)(j).setUserInfo,t=Object(c.useContext)(u).setJwt,n=Object(c.useContext)(v).setNeedReload;return Object(i.jsx)("div",{children:Object(i.jsx)(p.a,{clientId:g,buttonText:"Login",onSuccess:function(c){console.log("[Login Success] Current User:",c),"profileObj"in c&&c.isSignedIn()&&(e({username:c.profileObj.givenName,imgUrl:c.profileObj.imageUrl}),t(c.tokenId),n(!0),fetch("".concat("https://dajeki-tarot.herokuapp.com","/userInfo/login"),{method:"POST",headers:{authorization:"Bearer ".concat(c.tokenId)}}).then((function(e){return e.json()})).then((function(e){return console.log(e.success?"Success: ".concat(e.success):"",e.error?"Error: ".concat(e.error):"")})).catch((function(e){return console.log(e)})),function(e,t){var n=1e3*(e.tokenObj.expires_in||3300);function c(){return a.apply(this,arguments)}function a(){return(a=Object(h.a)(x.a.mark((function a(){var s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.reloadAuthResponse();case 2:s=a.sent,n=1e3*(s.expires_in||3300),console.log("newAuthRes:",s),console.log("new auth token",s.id_token),t(s.id_token),setTimeout(c,n);case 8:case"end":return a.stop()}}),a)})))).apply(this,arguments)}setTimeout(c,n)}(c,t))},onFailure:function(e){console.log("[Login Success] Already Logged In:",e)},cookiePolicy:"single_host_origin",isSignedIn:!0})})},w=Object(c.createContext)({pastSpreads:[{}],setPastSpreads:void 0}),C=w.Provider;var k=function(){var e=Object(c.useContext)(j).setUserInfo,t=Object(c.useContext)(u).setJwt,n=Object(c.useContext)(w).setPastSpreads,a=Object(c.useContext)(v).setNeedReload;return Object(i.jsx)("div",{children:Object(i.jsx)(O.GoogleLogout,{clientId:"914582580489-tms667vjlg9nq2n7c2rkjfbadsk2bsrp.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){e({username:"",imgUrl:""}),t(""),n([{}]),a(!0)}})})};var y=function(){var e=Object(c.useState)({username:"",imgUrl:""}),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(i.jsxs)("header",{children:[Object(i.jsx)("img",{className:"logo",src:"".concat("/Dajeki-Tarot","/images/symbols/crystalball.svg"),alt:"Crystal Ball with eye in center"}),Object(i.jsx)(d,{className:"title",children:Object(i.jsx)("h1",{children:"Dajeki Tarot"})}),Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("img",{className:"profilePic",src:n.imgUrl}),Object(i.jsx)(d,{style:{display:"inline-block",justifySelf:"flex-end"},children:Object(i.jsx)("h3",{children:n.username})})]}),Object(i.jsx)("div",{className:"userServicesSection",children:Object(i.jsx)(l,{value:{setUserInfo:a},children:n.username?Object(i.jsx)(k,{}):Object(i.jsx)(S,{})})})]})},_=Object(c.createContext)({cardsDrawn:void 0,setCardsDrawn:void 0}),N=_.Provider,D=(n(24),n(9));n(25);var T=function(e){var t=e.name,n=e.element,c=e.suit,a=e.style;return Object(i.jsxs)("div",{className:"card fade-in-bottom-rotate default-border-radius",children:[Object(i.jsx)("h4",{children:t}),Object(i.jsx)("img",{src:"".concat("/Dajeki-Tarot","/images/rider-waite/front/").concat(c,"/").concat(t,".jpg"),alt:"",style:Object(D.a)(Object(D.a)({},a),{},{height:"100%",maxWidth:"100%"})}),Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",width:"100%"},children:[Object(i.jsx)(d,{children:Object(i.jsx)("img",{className:"icon-50px",src:"".concat("/Dajeki-Tarot","/images/symbols/elements/").concat(n,".svg"),alt:""})}),Object(i.jsx)(d,{children:Object(i.jsx)("img",{className:"icon-50px",src:"".concat("/Dajeki-Tarot","/images/symbols/suits/").concat(c,".svg"),alt:""})})]})]})};var P,I=function(){var e=Object(c.useContext)(_).cardsDrawn;return Object(i.jsx)("div",{className:"mat default-border-radius",children:e.map((function(e,t){return Object(i.jsx)(T,{style:e.card_meaning_up?{}:{transform:"rotate(180deg)"},name:e.card_name,element:e.element,suit:e.suit},t)}))})},U=(n(26),Object(c.createContext)({popout:void 0,setPopout:void 0})),M=U.Provider,R=Object(c.createContext)({displayedMenu:void 0,setDisplayedMenu:void 0}),A=R.Provider;!function(e){e[e.SpreadInfo=0]="SpreadInfo",e[e.PastSpread=1]="PastSpread",e[e.SaveSpread=2]="SaveSpread"}(P||(P={}));var L=function(){var e=Object(c.useContext)(U).setPopout,t=Object(c.useContext)(_).setCardsDrawn,n=Object(c.useContext)(R).setDisplayedMenu,a=Object(c.useState)(void 0),s=Object(o.a)(a,2),r=s[0],j=s[1];return Object(i.jsx)("footer",{children:Object(i.jsxs)("div",{className:"commandBar default-border-radius",children:[Object(i.jsx)(d,{toggle:!0,children:Object(i.jsx)("img",{onClick:Object(h.a)(x.a.mark((function e(){var n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://dajeki-tarot.herokuapp.com","/cards/3"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(!("error"in(c=e.sent))){e.next=9;break}return console.log(c.error),e.abrupt("return");case 9:t([]),t(c);case 11:case"end":return e.stop()}}),e)}))),className:"icon-50px",src:"".concat("/Dajeki-Tarot","/images/symbols/action/drawcard.svg"),alt:""})}),Object(i.jsx)(d,{toggle:!0,children:Object(i.jsx)("img",{onClick:function(){if(+r===P.PastSpread)return e([!1,!1]),void j(-1);e([!0,!1]),n(P.PastSpread),j(P.PastSpread)},className:"icon-50px",src:"".concat("/Dajeki-Tarot","/images/symbols/action/shuffle.svg"),alt:""})}),Object(i.jsx)(d,{toggle:!0,children:Object(i.jsx)("img",{onClick:function(){if(+r===P.SpreadInfo)return e([!1,!1]),void j(-1);e([!0,!1]),n(P.SpreadInfo),j(P.SpreadInfo)},className:"icon-50px",src:"".concat("/Dajeki-Tarot","/images/symbols/action/tarotspread.svg"),alt:""})}),Object(i.jsx)(d,{toggle:!0,children:Object(i.jsx)("img",{onClick:function(){if(+r===P.SaveSpread)return e([!1,!1]),void j(-1);e([!0,!1]),n(P.SaveSpread),j(P.SaveSpread)},className:"icon-50px",src:"".concat("/Dajeki-Tarot","/images/symbols/action/savespread.svg"),alt:""})})]})})};n(27),n(28);var B=function(){var e=Object(c.useContext)(_).cardsDrawn;return Object(i.jsx)("div",{className:"spreadContainer",children:e.map((function(e,t){var n;return Object(i.jsxs)("div",{className:"spreadInfo",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{src:"".concat("/Dajeki-Tarot","/images/symbols/cards.svg")}),Object(i.jsx)("h4",{style:{display:"inline-block"},children:"Card ".concat(t+1," Meaning")})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{src:"".concat("/Dajeki-Tarot","/images/symbols/elements/").concat(e.element,".svg")}),Object(i.jsx)("img",{src:"".concat("/Dajeki-Tarot","/images/symbols/").concat(e.card_meaning_up?"uparrow":"downarrow",".svg")}),Object(i.jsx)("img",{src:"".concat("/Dajeki-Tarot","/images/symbols/suits/").concat(e.suit,".svg")})]}),Object(i.jsx)("h5",{children:e.card_name}),Object(i.jsx)("p",{children:null!==(n=e.card_meaning_up)&&void 0!==n?n:e.card_meaning_down})]},t)}))})};n(29);var E=function(){var e=Object(c.useState)("0"),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useContext)(_).cardsDrawn,r=Object(c.useContext)(u).jwt,d=Object(c.useContext)(v).setNeedReload,j=Object(c.useRef)(null),l=Object(c.useRef)(null);function b(e){j.current&&(j.current.size=9===j.current.size?1:9),+e.target.value>=0&&a(e.target.value)}return Object(i.jsx)("div",{className:"saveSpread",children:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.length&&fetch("".concat("https://dajeki-tarot.herokuapp.com","/cards/save_spread"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(r)},body:JSON.stringify({cards:[s[0].id,s[1].id,s[2].id],spreadId:n,spreadDir:"".concat(s[0].card_meaning_up?1:0).concat(s[1].card_meaning_up?1:0).concat(s[2].card_meaning_up?1:0)})}).then((function(e){return e.json()})).then((function(e){(new Date).setTime(e.availDate),l.current&&e.error?l.current.innerText=(e.error?"".concat(e.error):"")+(e.availTime?"\nCome back in ".concat(e.availTime," hours"):""):l.current&&e.success&&(l.current.innerText=e.success,d(!0))}))},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"spreadType",children:Object(i.jsx)("h3",{children:"Spread Meaning"})}),Object(i.jsxs)("div",{className:"customSelect",children:[Object(i.jsxs)("select",{value:n,className:"spreadSelect",id:"spreadType",ref:j,onMouseDown:b,onChange:function(){},children:[Object(i.jsx)("option",{value:"0"}),Object(i.jsx)("option",{value:"1",children:"Past, Present, Future"}),Object(i.jsx)("option",{value:"2",children:"Nature, Cause, Solution"}),Object(i.jsx)("option",{value:"3",children:"Situation, Obstacle, Advice"}),Object(i.jsx)("option",{value:"4",children:"Current Standing, Aspire, How"}),Object(i.jsx)("option",{value:"5",children:"You, Person, Relationship"}),Object(i.jsx)("option",{value:"6",children:"Strength, Weakness, Advice"}),Object(i.jsx)("option",{value:"7",children:"Mind, Body, Spirit"}),Object(i.jsx)("option",{value:"8",children:"You, Your Current Path, Your Potential"})]}),Object(i.jsx)("div",{className:"selectIcon",onClick:b,children:Object(i.jsx)("img",{src:"https://img.icons8.com/metro/26/ACACAC/expand-arrow.png"})})]})]}),Object(i.jsx)("button",{type:"submit",className:"saveBtn",disabled:"0"===n,children:"Save Spread"}),Object(i.jsx)("div",{ref:l})]})})};n(30);var J=function(){var e=Object(c.useContext)(w),t=e.pastSpreads,n=e.setPastSpreads,a=Object(c.useContext)(u).jwt,s=Object(c.useContext)(v),r=s.needReload,o=s.setNeedReload;return Object(c.useEffect)((function(){r&&a&&fetch("".concat("https://dajeki-tarot.herokuapp.com","/userInfo/past_spread"),{headers:{authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){n(e),o(!1)}))}),[a]),Object(i.jsx)("div",{className:"savedSpreads",children:!r&&t.length&&a&&function(){for(var e,n=[],c=0;c<t.length;c+=3)e=t[c].direction.split(""),n.push(Object(i.jsxs)("table",{children:[Object(i.jsx)("thead",{children:Object(i.jsx)("tr",{children:Object(i.jsx)("th",{colSpan:4,children:"".concat(new Date(new Date(t[c].date_drawn).getTime()-(new Date).getTimezoneOffset()).toLocaleDateString()," ")+"".concat(t[c].card_one_spread_meaning," ")+"".concat(t[c].card_two_spread_meaning," ")+"".concat(t[c].card_three_spread_meaning)})})}),Object(i.jsxs)("tbody",{children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t[c].card_name}),Object(i.jsx)("td",{children:t[c].element}),Object(i.jsx)("td",{children:"1"===e[0]?"Up":"Down"}),Object(i.jsx)("td",{children:"1"===e[0]?t[c].card_meaning_up:t[c].card_meaning_down})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t[c+1].card_name}),Object(i.jsx)("td",{children:t[c+1].element}),Object(i.jsx)("td",{children:"1"===e[1]?"Up":"Down"}),Object(i.jsx)("td",{children:"1"===e[1]?t[c+1].card_meaning_up:t[c+1].card_meaning_down})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t[c+2].card_name}),Object(i.jsx)("td",{children:t[c+2].element}),Object(i.jsx)("td",{children:"1"===e[2]?"Up":"Down"}),Object(i.jsx)("td",{children:"1"===e[2]?t[c+2].card_meaning_up:t[c+2].card_meaning_down})]})]})]},c));return n}()})};var z=function(){var e=Object(c.useContext)(U),t=Object(o.a)(e.popout,2),n=t[0],a=t[1],s=Object(c.useContext)(R).displayedMenu;return Object(i.jsx)("div",{className:"".concat(n?"slide-in-left":"slide-out-left"," popout default-border-radius"),style:{display:a?"none":"block"},children:function(){switch(+s){case P.SpreadInfo:return Object(i.jsx)(B,{});case P.PastSpread:return Object(i.jsx)(J,{});case P.SaveSpread:return Object(i.jsx)(E,{});default:return Object(i.jsx)("div",{children:"HIT DEFAULT?"})}}()})};var F=function(){var e=Object(c.useState)([!1,!0]),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),r=Object(o.a)(s,2),d=r[0],j=r[1],l=Object(c.useState)(P.SpreadInfo),u=Object(o.a)(l,2),O=u[0],p=u[1],m=Object(c.useState)(""),x=Object(o.a)(m,2),h=x[0],v=x[1],g=Object(c.useState)(!0),S=Object(o.a)(g,2),w=S[0],k=S[1],_=Object(c.useState)([{}]),D=Object(o.a)(_,2),T=D[0],U=D[1];return Object(i.jsx)("div",{className:"programContainer",children:Object(i.jsx)(b,{value:{jwt:h,setJwt:v},children:Object(i.jsx)(C,{value:{pastSpreads:T,setPastSpreads:U},children:Object(i.jsxs)(f,{value:{needReload:w,setNeedReload:k},children:[Object(i.jsx)(y,{}),Object(i.jsx)(N,{value:{cardsDrawn:d,setCardsDrawn:j},children:Object(i.jsx)(M,{value:{popout:n,setPopout:a},children:Object(i.jsxs)(A,{value:{displayedMenu:O,setDisplayedMenu:p},children:[Object(i.jsx)(z,{}),Object(i.jsx)(I,{}),Object(i.jsx)(L,{})]})})})]})})})})};r.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(F,{})}),document.getElementById("root"))}],[[31,1,2]]]);
//# sourceMappingURL=main.3ad9321e.chunk.js.map